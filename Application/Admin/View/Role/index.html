<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta charset="utf-8" />
  <title>媒体管理</title>

  <meta name="description" content="Static &amp; Dynamic Tables" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

  <!-- bootstrap & fontawesome -->
  <link rel="stylesheet" href="__PUBLIC__/assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="__PUBLIC__/assets/css/font-awesome.min.css" />

  <!-- page specific plugin styles -->

  <!-- text fonts -->
  <link rel="stylesheet" href="__PUBLIC__/assets/css/ace-fonts.css" />

  <!-- ace styles -->
  <link rel="stylesheet" href="__PUBLIC__/assets/css/ace.min.css" id="main-ace-style" />

  <!--[if lte IE 9]>
  <link rel="stylesheet" href="__PUBLIC__/assets/css/ace-part2.min.css" />
  <![endif]-->
  <link rel="stylesheet" href="__PUBLIC__/assets/css/ace-skins.min.css" />
  <link rel="stylesheet" href="__PUBLIC__/assets/css/ace-rtl.min.css" />

  <!--[if lte IE 9]>
  <link rel="stylesheet" href="__PUBLIC__/assets/css/ace-ie.min.css" />
  <![endif]-->

  <!-- inline styles related to this page -->

  <!-- ace settings handler -->
  <script src="__PUBLIC__/assets/js/ace-extra.min.js"></script>
  <script type="text/javascript">
    window.jQuery || document.write("<script src='__PUBLIC__/assets/js/jquery.min.js'>"+"<"+"/script>");
  </script>
  <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

  <!--[if lte IE 8]>
  <script src="__PUBLIC__/assets/js/html5shiv.min.js"></script>
  <script src="__PUBLIC__/assets/js/respond.min.js"></script>
  <![endif]-->
</head>

<body class="no-skin">
<!-- #section:basics/navbar.layout -->
<div id="navbar" class="navbar navbar-default">
  <script type="text/javascript">
    try{ace.settings.check('navbar' , 'fixed')}catch(e){}
  </script>

  <!-- /.navbar-container -->
  <!-- 头部 -->
  <include file="Common/head"/>
</div>

<!-- /section:basics/navbar.layout -->
<div class="main-container" id="main-container">
  <script type="text/javascript">
    try{ace.settings.check('main-container' , 'fixed')}catch(e){}
  </script>

  <!-- #section:basics/sidebar -->
  <!-- 导航条 -->
  <include file="Common/navigation"/>
  <!-- /section:basics/sidebar -->

  <!-- 正文 -->
  <div class="main-content">
    <!-- #section:basics/content.breadcrumbs -->
    <div class="breadcrumbs" id="breadcrumbs">
      <script type="text/javascript">
        try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
      </script>

      <ul class="breadcrumb">
        <li>
          <i class="ace-icon fa fa-home home-icon"></i>
          <a href="#">系统设置</a>
        </li>

        <li class="active">角色列表</li>
      </ul><!-- /.breadcrumb -->

      <!-- #section:basics/content.searchbox -->
      <div class="nav-search" id="nav-search">

      </div><!-- /.nav-search -->

      <!-- /section:basics/content.searchbox -->
    </div>

    <!-- /section:basics/content.breadcrumbs -->
    <div class="page-content">
      <!-- #section:settings.box -->
      <!-- /.ace-settings-container -->

      <!-- /section:settings.box -->
      <div class="page-content-area">
        <!-- /.page-header -->
        <div class="row" style="height:50px;">
          <div class="col-xs-2">
            <div>
              <input type="text" id="Name" placeholder="角色名称">
            </div>
          </div>
          <div class="col-xs-2">
            <div>
              <select id="Platform" style="width: 100%" class="condition" data-placeholder="所有平台类型">
                <option value=""> 所有平台类型 </option>
                <foreach name="flatforms" item="v">
                  <option value="{$v.id}"> {$v.name} </option>
                </foreach>
              </select>
            </div>
          </div>
          <div class="col-xs-2">
            <div>
              <select id="Status" style="width: 100%" class="condition" data-placeholder="全部状态">
                <option value=""> 全部状态 </option>
                <option value="1">正常</option>
                <option value="2">停用</option>
              </select>
            </div>
          </div>
          <div class="col-xs-4">
            <!--<button type="button" class="btn btn-sm btn-success">-->
            <!--查询-->
            <!--<i class="ace-icon fa fa-arrow-right icon-on-right bigger-110"></i>-->
            <!--</button>-->
          </div>
          <div class="col-xs-2" style="text-align:right;">
            <a href="/role/add">
              <button type="button" class="btn btn-sm btn-success">
                添加
                <i class="glyphicon glyphicon-plus"></i>
              </button>
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <!-- PAGE CONTENT BEGINS -->
            <div class="row">
              <div class="col-xs-12">
                <table id="sample-table-1" class="table table-striped table-bordered table-hover">
                  <thead>
                  <tr>
                    <th style="width: 120px;">角色ID</th>
                    <th style="width: 120px;">角色名称</th>
                    <th style="width: 120px;">平台类型</th>
                    <th class="hidden-480">备注</th>
                    <th style="width: 120px;">状态</th>
                    <th style="width: 120px;">操作</th>
                  </tr>
                  </thead>
                  <tbody id="Tbody">
                  </tbody>
                </table>

                <!--<div class="tcdPageCode"></div>-->

              </div><!-- /.span -->
            </div><!-- /.row -->

            <div class="hr hr-18 dotted hr-double"></div>

            <div id="modal-table" class="modal fade" tabindex="-1">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header no-padding">
                    <div class="table-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <span class="white">&times;</span>
                      </button>
                      Results for "Latest Registered Domains
                    </div>
                  </div>

                  <div class="modal-footer no-margin-top">
                    <button class="btn btn-sm btn-danger pull-left" data-dismiss="modal">
                      <i class="ace-icon fa fa-times"></i>
                      Close
                    </button>

                    <ul class="pagination pull-right no-margin">
                      <li class="prev disabled">
                        <a href="#">
                          <i class="ace-icon fa fa-angle-double-left"></i>
                        </a>
                      </li>

                      <li class="active">
                        <a href="#">1</a>
                      </li>

                      <li>
                        <a href="#">2</a>
                      </li>

                      <li>
                        <a href="#">3</a>
                      </li>

                      <li class="next">
                        <a href="#">
                          <i class="ace-icon fa fa-angle-double-right"></i>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div><!-- /.modal-content -->
              </div><!-- /.modal-dialog -->
            </div><!-- PAGE CONTENT ENDS -->
          </div><!-- /.col -->
        </div><!-- /.row -->

      </div><!-- /.page-content-area -->
    </div><!-- /.page-content -->
  </div><!-- /.main-content -->
  <!-- 正文结束 -->

  <!-- 尾部 -->
  <include file="Common/footer"/>

  <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
    <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
  </a>
</div><!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->
<script type="text/javascript">
  window.jQuery || document.write("<script src='__PUBLIC__/assets/js/jquery.min.js'>"+"<"+"/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
  window.jQuery || document.write("<script src='__PUBLIC__/assets/js/jquery1x.min.js'>"+"<"+"/script>");
</script>
<![endif]-->
<script type="text/javascript">
  if('ontouchstart' in document.documentElement) document.write("<script src='__PUBLIC__/assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
</script>
<script src="__PUBLIC__/assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<script src="__PUBLIC__/assets/js/jquery.dataTables.min.js"></script>
<script src="__PUBLIC__/assets/js/jquery.dataTables.bootstrap.js"></script>

<!-- ace scripts -->
<script src="__PUBLIC__/assets/js/ace-elements.min.js"></script>
<script src="__PUBLIC__/assets/js/ace.min.js"></script>

<!-- inline scripts related to this page -->
<script type="text/javascript">
  jQuery(function($) {
    var oTable1 =
        $('#sample-table-2')
        //.wrap("<div class='dataTables_borderWrap' />")   //if you are applying horizontal scrolling (sScrollX)
            .dataTable( {
              bAutoWidth: false,
              "aoColumns": [
                { "bSortable": false },
                null, null,null, null, null,
                { "bSortable": false }
              ],
              "aaSorting": [],
            } );

    $(document).on('click', 'th input:checkbox' , function(){
      var that = this;
      $(this).closest('table').find('tr > td:first-child input:checkbox')
          .each(function(){
            this.checked = that.checked;
            $(this).closest('tr').toggleClass('selected');
          });
    });


    $('[data-rel="tooltip"]').tooltip({placement: tooltip_placement});
    function tooltip_placement(context, source) {
      var $source = $(source);
      var $parent = $source.closest('table')
      var off1 = $parent.offset();
      var w1 = $parent.width();

      var off2 = $source.offset();
      //var w2 = $source.width();

      if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
      return 'left';
    }

//    //    表单验证
//
//    $('#Email').blur(function () {
//      var val = $(this).val();
//      if(val == "") {
//        $('#EmailMessage').html('不能为空');
//      }else if(!val.match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/)){
//        $('#EmailMessage').html('邮箱格式不正确');
//      }else{
//        $('#EmailMessage').html('');
//      }
//    });
//
//    $('#Pwd').blur(function () {
//      var val = $(this).val();
//      if(val == "") {
//        $('#PwdMsg').html('不能为空');
//      }else if(val.length < 6){
//        $('#PwdMsg').html('密码长度最少六位');
//      }else{
//        $('#PwdMsg').html('');
//      }
//    });
//
//    $('#ConfirmP').blur(function () {
//      var val = $(this).val();
//      var pwd = $("#Pwd").val();
//      if(val != pwd) {
//        $('#ConfirmPMsg').html('两次输入密码不同');
//      }else{
//        $('#ConfirmPMsg').html('');
//      }
//    });
//
//    $('#Linkman').blur(function () {
//      var val = $(this).val();
//      if(val == '') {
//        $('#LinkmanMsg').html('不能为空');
//      }else{
//        $('#LinkmanMsg').html('');
//      }
//    });
//
//    $('#MobileTel').blur(function () {
//      var val = $(this).val();
//      if(val == '') {
//        $('#MobileTelMsg').html('不能为空');
//      }else if(!val.match(/^1\d{10}$/)){
//        $('#MobileTelMsg').html('手机格式不正确');
//      }else{
//        $('#MobileTelMsg').html('');
//      }
//    });
//
//    $('#Submit').click(function () {
//      if($('#Email').val() == '' || $('#Pwd').val() == '' || $('#ConfirmP').val() == '' || $('#Linkman').val() == '' || $('#MobileTel').val() == '' || $('#EmailMessage').val() != '' || $('#PwdMsg').val() != '' || $('#ConfirmPMsg').val() != '' || $('#LinkmanMsg').val() != '' || $('#MobileTelMsg').val() != '') {
//        return false;
//      }
//      $('#Form').submit();
//    });


    $('#Name').blur(function () {
      getList();
    });

    $('#Platform').change(function () {
      getList();
    });

    $('#Status').change(function () {
      getList();
    });


    getList();

    function getList() {
      var platform = $('#Platform').val();
      var status = $('#Status').val();
      var name = $('#Name').val();
      $.post('/role/index', {'name' : name, 'platform' : platform, 'status' : status, 'type' : 'getList'}, function (result) {
        if (result) {
          $("#Tbody").empty();
          $("#Tbody").html(result);
        }
      } );
    }

  })

  function changeStatus(id) {
    var _this = this;
    $.post('/role/setStatus', {'id' : id}, function (result) {
      if (result) {

      }
    } );
  }
</script>
</body>
</html>